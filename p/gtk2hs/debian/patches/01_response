#! /bin/sh /usr/share/dpatch/dpatch-run
## 01_response by Marco TÃºlio Gontijo e Silva <marcot@holoscopio.com>
##
## DP: This patch is already in upstream darcs.  It removes the restriction
## DP: that user defined responses should not be zero or lesser than -11.
## DP: According to Axel Simon,  "Gtk+ docs say that anything below 0 is
## DP: reserved for Gtk+.  But then, a negative number in ResponseUser is
## DP: probably better than an pattern match error."
## DP: http://sourceforge.net/mailarchive/message.php?msg_name=1241698296.10549.13.camel%40aconit
## DP: Thanks to Daniel Burrows <dburrows@debian.org>. Closes: #522481.
diff -Nudar gtk2hs-0.10.1.orig/gtk/Graphics/UI/Gtk/General/Structs.hsc gtk2hs-0.10.1/gtk/Graphics/UI/Gtk/General/Structs.hsc
--- gtk2hs-0.10.1.orig/gtk/Graphics/UI/Gtk/General/Structs.hsc  2009-04-24 12:21:33.000000000 -0300
+++ gtk2hs-0.10.1/gtk/Graphics/UI/Gtk/General/Structs.hsc       2009-05-17 08:53:07.000000000 -0300
@@ -548,7 +548,7 @@
 fromResponse ResponseNo = -9
 fromResponse ResponseApply = -10
 fromResponse ResponseHelp = -11
-fromResponse (ResponseUser i) | i > 0 = fromIntegral i
+fromResponse (ResponseUser i) = fromIntegral i

 toResponse :: Integral a => a -> ResponseId
 toResponse (-1) = ResponseNone
@@ -562,7 +562,7 @@
 toResponse (-9) = ResponseNo
 toResponse (-10) = ResponseApply
 toResponse (-11) = ResponseHelp
-toResponse i | i >= 0  = ResponseUser $ fromIntegral i
+toResponse i = ResponseUser $ fromIntegral i

 #if !defined(WIN32) || GTK_CHECK_VERSION(2,8,0)
 -- | The identifer of a window of the underlying windowing system.
