Description: Upstream changes introduced in version 7.0.2-4
 This patch has been created by dpkg-source during the package build.
 Here's the last changelog entry, hopefully it gives details on why
 those changes were made:
 .
 ghc (7.0.2-4) UNRELEASED; urgency=low
 .
   * ghc6-preinst: Remove package.cache file of any ghc6 installation to avoid
     dpkg warning at upgrade time. TO BE TESTED BEFORE UPLOADING
   * Build-conflict with ccache. pbuilder installs ccache by default, which
     causes ghc to pick up a wrong path for "gcc".
   * Pass -lpthread everywhere. This can possibly be dropped later.
 .
 The person named in the Author field signed this changelog entry.
Author: Joachim Breitner <nomeata@debian.org>

---
The information above should follow the Patch Tagging Guidelines, please
checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: <vendor|upstream|other>, <url of original patch>
Bug: <url in upstream bugtracker>
Bug-Debian: http://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: <no|not-needed|url proving that it has been forwarded>
Reviewed-By: <name and email of someone who approved the patch>
Last-Update: <YYYY-MM-DD>

Index: ghc-7.0.4/configure
===================================================================
--- ghc-7.0.4.orig/configure	2011-09-05 14:09:21.000000000 +0200
+++ ghc-7.0.4/configure	2011-09-05 14:09:30.000000000 +0200
@@ -1,13 +1,13 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.65 for The Glorious Glasgow Haskell Compilation System 7.0.4.
+# Generated by GNU Autoconf 2.68 for The Glorious Glasgow Haskell Compilation System 7.0.4.
 #
 # Report bugs to <glasgow-haskell-bugs@haskell.org>.
 #
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
-# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software Foundation,
-# Inc.
+# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
+# Foundation, Inc.
 #
 #
 # This configure script is free software; the Free Software Foundation
@@ -91,6 +91,7 @@
 IFS=" ""	$as_nl"
 
 # Find who we are.  Look in the path if we contain no directory separator.
+as_myself=
 case $0 in #((
   *[\\/]* ) as_myself=$0 ;;
   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -216,11 +217,18 @@
   # We cannot yet assume a decent shell, so we have to provide a
 	# neutralization value for shells without unset; and this also
 	# works around shells that cannot unset nonexistent variables.
+	# Preserve -v and -x to the replacement shell.
 	BASH_ENV=/dev/null
 	ENV=/dev/null
 	(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
 	export CONFIG_SHELL
-	exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
+	case $- in # ((((
+	  *v*x* | *x*v* ) as_opts=-vx ;;
+	  *v* ) as_opts=-v ;;
+	  *x* ) as_opts=-x ;;
+	  * ) as_opts= ;;
+	esac
+	exec "$CONFIG_SHELL" $as_opts "$as_myself" ${1+"$@"}
 fi
 
     if test x$as_have_required = xno; then :
@@ -319,7 +327,7 @@
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
@@ -359,19 +367,19 @@
 fi # as_fn_arith
 
 
-# as_fn_error ERROR [LINENO LOG_FD]
-# ---------------------------------
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with status $?, using 1 if that was 0.
+# script with STATUS, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$?; test $as_status -eq 0 && as_status=1
-  if test "$3"; then
-    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $1" >&2
+  $as_echo "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
@@ -533,7 +541,7 @@
 exec 6>&1
 
 # Name of the host.
-# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
 # so uname gets run too.
 ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
 
@@ -864,8 +872,9 @@
   fi
 
   case $ac_option in
-  *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
-  *)	ac_optarg=yes ;;
+  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
+  *=)   ac_optarg= ;;
+  *)    ac_optarg=yes ;;
   esac
 
   # Accept the important Cygnus configure options, so we can diagnose typos.
@@ -910,7 +919,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -936,7 +945,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1140,7 +1149,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1156,7 +1165,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1186,8 +1195,8 @@
   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
     x_libraries=$ac_optarg ;;
 
-  -*) as_fn_error "unrecognized option: \`$ac_option'
-Try \`$0 --help' for more information."
+  -*) as_fn_error $? "unrecognized option: \`$ac_option'
+Try \`$0 --help' for more information"
     ;;
 
   *=*)
@@ -1195,7 +1204,7 @@
     # Reject names that are not valid shell variable names.
     case $ac_envvar in #(
       '' | [0-9]* | *[!_$as_cr_alnum]* )
-      as_fn_error "invalid variable name: \`$ac_envvar'" ;;
+      as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
     esac
     eval $ac_envvar=\$ac_optarg
     export $ac_envvar ;;
@@ -1205,7 +1214,7 @@
     $as_echo "$as_me: WARNING: you should use --build, --host, --target" >&2
     expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
       $as_echo "$as_me: WARNING: invalid host type: $ac_option" >&2
-    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
+    : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
     ;;
 
   esac
@@ -1213,13 +1222,13 @@
 
 if test -n "$ac_prev"; then
   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
-  as_fn_error "missing argument to $ac_option"
+  as_fn_error $? "missing argument to $ac_option"
 fi
 
 if test -n "$ac_unrecognized_opts"; then
   case $enable_option_checking in
     no) ;;
-    fatal) as_fn_error "unrecognized options: $ac_unrecognized_opts" ;;
+    fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
     *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
   esac
 fi
@@ -1242,7 +1251,7 @@
     [\\/$]* | ?:[\\/]* )  continue;;
     NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
   esac
-  as_fn_error "expected an absolute directory name for --$ac_var: $ac_val"
+  as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
 done
 
 # There might be people who depend on the old broken behavior: `$host'
@@ -1256,8 +1265,8 @@
 if test "x$host_alias" != x; then
   if test "x$build_alias" = x; then
     cross_compiling=maybe
-    $as_echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
-    If a cross compiler is detected then cross compile mode will be used." >&2
+    $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used" >&2
   elif test "x$build_alias" != "x$host_alias"; then
     cross_compiling=yes
   fi
@@ -1272,9 +1281,9 @@
 ac_pwd=`pwd` && test -n "$ac_pwd" &&
 ac_ls_di=`ls -di .` &&
 ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
-  as_fn_error "working directory cannot be determined"
+  as_fn_error $? "working directory cannot be determined"
 test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
-  as_fn_error "pwd does not report name of working directory"
+  as_fn_error $? "pwd does not report name of working directory"
 
 
 # Find the source files, if location was not specified.
@@ -1313,11 +1322,11 @@
 fi
 if test ! -r "$srcdir/$ac_unique_file"; then
   test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
-  as_fn_error "cannot find sources ($ac_unique_file) in $srcdir"
+  as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
 fi
 ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
 ac_abs_confdir=`(
-	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error "$ac_msg"
+	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
 	pwd)`
 # When building in place, set srcdir=.
 if test "$ac_abs_confdir" = "$ac_pwd"; then
@@ -1357,7 +1366,7 @@
       --help=short        display options specific to this package
       --help=recursive    display the short help of all the included packages
   -V, --version           display version information and exit
-  -q, --quiet, --silent   do not print \`checking...' messages
+  -q, --quiet, --silent   do not print \`checking ...' messages
       --cache-file=FILE   cache test results in FILE [disabled]
   -C, --config-cache      alias for \`--cache-file=config.cache'
   -n, --no-create         do not create output files
@@ -1519,9 +1528,9 @@
 if $ac_init_version; then
   cat <<\_ACEOF
 The Glorious Glasgow Haskell Compilation System configure 7.0.4
-generated by GNU Autoconf 2.65
+generated by GNU Autoconf 2.68
 
-Copyright (C) 2009 Free Software Foundation, Inc.
+Copyright (C) 2010 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
@@ -1565,7 +1574,7 @@
 
 	ac_retval=1
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_compile
@@ -1591,7 +1600,7 @@
     mv -f conftest.er1 conftest.err
   fi
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } >/dev/null && {
+  test $ac_status = 0; } > conftest.i && {
 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
 	 test ! -s conftest.err
        }; then :
@@ -1602,7 +1611,7 @@
 
     ac_retval=1
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_cpp
@@ -1644,7 +1653,7 @@
        ac_retval=$ac_status
 fi
   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_run
@@ -1657,10 +1666,10 @@
 ac_fn_c_check_header_mongrel ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+  if eval \${$3+:} false; then :
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 fi
 eval ac_res=\$$3
@@ -1696,7 +1705,7 @@
 else
   ac_header_preproc=no
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
 $as_echo "$ac_header_preproc" >&6; }
 
@@ -1719,17 +1728,15 @@
 $as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
 $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
-( cat <<\_ASBOX
-## ----------------------------------------------- ##
+( $as_echo "## ----------------------------------------------- ##
 ## Report this to glasgow-haskell-bugs@haskell.org ##
-## ----------------------------------------------- ##
-_ASBOX
+## ----------------------------------------------- ##"
      ) | sed "s/^/$as_me: WARNING:     /" >&2
     ;;
 esac
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=\$ac_header_compiler"
@@ -1738,7 +1745,7 @@
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_header_mongrel
 
@@ -1751,7 +1758,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -1769,7 +1776,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_header_compile
 
@@ -1782,7 +1789,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=no"
@@ -1823,7 +1830,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_type
 
@@ -2000,7 +2007,7 @@
 rm -f conftest.val
 
   fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_compute_int
@@ -2046,7 +2053,7 @@
   # interfere with the next link command; also delete a directory that is
   # left behind by Apple's compiler.  We do this before executing the actions.
   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_link
@@ -2059,7 +2066,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -2114,19 +2121,22 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_func
 
-# ac_fn_c_check_decl LINENO SYMBOL VAR
-# ------------------------------------
-# Tests whether SYMBOL is declared, setting cache variable VAR accordingly.
+# ac_fn_c_check_decl LINENO SYMBOL VAR INCLUDES
+# ---------------------------------------------
+# Tests whether SYMBOL is declared in INCLUDES, setting cache variable VAR
+# accordingly.
 ac_fn_c_check_decl ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $2 is declared" >&5
-$as_echo_n "checking whether $2 is declared... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+  as_decl_name=`echo $2|sed 's/ *(.*//'`
+  as_decl_use=`echo $2|sed -e 's/(/((/' -e 's/)/) 0&/' -e 's/,/) 0& (/g'`
+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $as_decl_name is declared" >&5
+$as_echo_n "checking whether $as_decl_name is declared... " >&6; }
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -2135,8 +2145,12 @@
 int
 main ()
 {
-#ifndef $2
-  (void) $2;
+#ifndef $as_decl_name
+#ifdef __cplusplus
+  (void) $as_decl_use;
+#else
+  (void) $as_decl_name;
+#endif
 #endif
 
   ;
@@ -2153,7 +2167,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_decl
 cat >config.log <<_ACEOF
@@ -2161,7 +2175,7 @@
 running configure, to aid debugging if configure makes a mistake.
 
 It was created by The Glorious Glasgow Haskell Compilation System $as_me 7.0.4, which was
-generated by GNU Autoconf 2.65.  Invocation command line was
+generated by GNU Autoconf 2.68.  Invocation command line was
 
   $ $0 $@
 
@@ -2271,11 +2285,9 @@
   {
     echo
 
-    cat <<\_ASBOX
-## ---------------- ##
+    $as_echo "## ---------------- ##
 ## Cache variables. ##
-## ---------------- ##
-_ASBOX
+## ---------------- ##"
     echo
     # The following way of writing the cache mishandles newlines in values,
 (
@@ -2309,11 +2321,9 @@
 )
     echo
 
-    cat <<\_ASBOX
-## ----------------- ##
+    $as_echo "## ----------------- ##
 ## Output variables. ##
-## ----------------- ##
-_ASBOX
+## ----------------- ##"
     echo
     for ac_var in $ac_subst_vars
     do
@@ -2326,11 +2336,9 @@
     echo
 
     if test -n "$ac_subst_files"; then
-      cat <<\_ASBOX
-## ------------------- ##
+      $as_echo "## ------------------- ##
 ## File substitutions. ##
-## ------------------- ##
-_ASBOX
+## ------------------- ##"
       echo
       for ac_var in $ac_subst_files
       do
@@ -2344,11 +2352,9 @@
     fi
 
     if test -s confdefs.h; then
-      cat <<\_ASBOX
-## ----------- ##
+      $as_echo "## ----------- ##
 ## confdefs.h. ##
-## ----------- ##
-_ASBOX
+## ----------- ##"
       echo
       cat confdefs.h
       echo
@@ -2403,7 +2409,12 @@
 ac_site_file1=NONE
 ac_site_file2=NONE
 if test -n "$CONFIG_SITE"; then
-  ac_site_file1=$CONFIG_SITE
+  # We do not want a PATH search for config.site.
+  case $CONFIG_SITE in #((
+    -*)  ac_site_file1=./$CONFIG_SITE;;
+    */*) ac_site_file1=$CONFIG_SITE;;
+    *)   ac_site_file1=./$CONFIG_SITE;;
+  esac
 elif test "x$prefix" != xNONE; then
   ac_site_file1=$prefix/share/config.site
   ac_site_file2=$prefix/etc/config.site
@@ -2418,7 +2429,11 @@
     { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
 $as_echo "$as_me: loading site script $ac_site_file" >&6;}
     sed 's/^/| /' "$ac_site_file" >&5
-    . "$ac_site_file"
+    . "$ac_site_file" \
+      || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "failed to load site script $ac_site_file
+See \`config.log' for more details" "$LINENO" 5; }
   fi
 done
 
@@ -2494,7 +2509,7 @@
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
   { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
 $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
-  as_fn_error "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
+  as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
 fi
 ## -------------------- ##
 ## Main body of script. ##
@@ -2534,7 +2549,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_fp_prog_find+set}" = set; then :
+if ${ac_cv_path_fp_prog_find+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $fp_prog_find in
@@ -2597,7 +2612,7 @@
 set dummy find; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_FindCmd+set}" = set; then :
+if ${ac_cv_prog_FindCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$FindCmd"; then
@@ -2655,7 +2670,7 @@
 set dummy sort; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_fp_prog_sort+set}" = set; then :
+if ${ac_cv_path_fp_prog_sort+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $fp_prog_sort in
@@ -2704,7 +2719,7 @@
 set dummy sort; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_SortCmd+set}" = set; then :
+if ${ac_cv_prog_SortCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$SortCmd"; then
@@ -2769,7 +2784,7 @@
     elif test -d .git; then
                 ver_date=`git log -n 1 --date=short --pretty=format:%ci | sed "s/^.*\([0-9][0-9][0-9][0-9]\)-\([0-9][0-9]\)-\([0-9][0-9]\).*$/\1\2\3/"`
         if echo $ver_date | grep '^[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$' 2>&1 >/dev/null; then true; else
-                        as_fn_error "failed to detect version date: check that git is in your path" "$LINENO" 5
+                        as_fn_error $? "failed to detect version date: check that git is in your path" "$LINENO" 5
         fi
         PACKAGE_VERSION=${PACKAGE_VERSION}.$ver_date
         { $as_echo "$as_me:${as_lineno-$LINENO}: result: inferred $PACKAGE_VERSION" >&5
@@ -2778,7 +2793,7 @@
         # TODO: Remove this branch after conversion to Git
                 ver_date=`darcs changes --quiet --no-summary --xml | head -500 | grep 'date=' | sed "s/^.*date='\([0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]\).*$/\1/g" | ${SortCmd} -n | tail -1`
         if echo $ver_date | grep '^[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$' 2>&1 >/dev/null; then true; else
-                        as_fn_error "failed to detect version date: check that darcs is in your path" "$LINENO" 5
+                        as_fn_error $? "failed to detect version date: check that darcs is in your path" "$LINENO" 5
         fi
         PACKAGE_VERSION=${PACKAGE_VERSION}.$ver_date
         { $as_echo "$as_me:${as_lineno-$LINENO}: result: inferred $PACKAGE_VERSION" >&5
@@ -2809,7 +2824,7 @@
 case $VERSION_MINOR in
   ?) ProjectVersionInt=${VERSION_MAJOR}0${VERSION_MINOR} ;;
   ??) ProjectVersionInt=${VERSION_MAJOR}${VERSION_MINOR} ;;
-  *) as_fn_error "bad minor version in $PACKAGE_VERSION" "$LINENO" 5 ;;
+  *) as_fn_error $? "bad minor version in $PACKAGE_VERSION" "$LINENO" 5 ;;
 esac
 
 
@@ -2856,7 +2871,7 @@
 set dummy ghc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_GHC+set}" = set; then :
+if ${ac_cv_path_GHC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $GHC in
@@ -2959,7 +2974,7 @@
 
 
   if test "$GhcMajVersion" = "unknown" -o "$GhcMinVersion" = "unknown"; then
-     as_fn_error "Cannot determine the version of $WithGhc.  Is it really GHC?" "$LINENO" 5
+     as_fn_error $? "Cannot determine the version of $WithGhc.  Is it really GHC?" "$LINENO" 5
   fi
 
           GhcMinVersion2=`echo "$GhcMinVersion" | sed 's/^\\(.\\)$/0\\1/'`
@@ -2995,7 +3010,7 @@
 
 if test "$BootingFromHc" = "NO" -a -d "$srcdir/compiler"; then
   if test "$WithGhc" = ""; then
-     as_fn_error "GHC is required unless bootstrapping from .hc files." "$LINENO" 5
+     as_fn_error $? "GHC is required unless bootstrapping from .hc files." "$LINENO" 5
   fi
   fp_version1=$GhcVersion; fp_version2=6.10
 fp_save_IFS=$IFS; IFS='.'
@@ -3018,11 +3033,11 @@
 done
 IFS=$fp_save_IFS
 if test "$fp_num1" -lt "$fp_num2"; then :
-  as_fn_error "GHC version 6.10 or later is required to compile GHC." "$LINENO" 5
+  as_fn_error $? "GHC version 6.10 or later is required to compile GHC." "$LINENO" 5
 fi
   if test `expr $GhcMinVersion % 2` = "1"; then
      if test "$EnableBootstrapWithDevelSnaphost" = "NO"; then
-        as_fn_error "
+        as_fn_error $? "
      $WithGhc is a development snapshot of GHC, version $GhcVersion.
      Bootstrapping using this version of GHC is not supported, and may not
      work.  Use --enable-bootstrap-with-devel-snapshot to try it anyway,
@@ -3107,16 +3122,22 @@
 # results in the following code
 ac_aux_dir=
 for ac_dir in "$srcdir" "$srcdir/.." "$srcdir/../.."; do
-  for ac_t in install-sh install.sh shtool; do
-    if test -f "$ac_dir/$ac_t"; then
-      ac_aux_dir=$ac_dir
-      ac_install_sh="$ac_aux_dir/$ac_t -c"
-      break 2
-    fi
-  done
+  if test -f "$ac_dir/install-sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install-sh -c"
+    break
+  elif test -f "$ac_dir/install.sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install.sh -c"
+    break
+  elif test -f "$ac_dir/shtool"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/shtool install -c"
+    break
+  fi
 done
 if test -z "$ac_aux_dir"; then
-  as_fn_error "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
+  as_fn_error $? "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
 fi
 
 # These three variables are undocumented and unsupported,
@@ -3130,27 +3151,27 @@
 
 # Make sure we can run config.sub.
 $SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
-  as_fn_error "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
+  as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
 $as_echo_n "checking build system type... " >&6; }
-if test "${ac_cv_build+set}" = set; then :
+if ${ac_cv_build+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_build_alias=$build_alias
 test "x$ac_build_alias" = x &&
   ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
 test "x$ac_build_alias" = x &&
-  as_fn_error "cannot guess build type; you must specify one" "$LINENO" 5
+  as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
 ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
-  as_fn_error "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
+  as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
 $as_echo "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical build" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
 esac
 build=$ac_cv_build
 ac_save_IFS=$IFS; IFS='-'
@@ -3168,14 +3189,14 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
 $as_echo_n "checking host system type... " >&6; }
-if test "${ac_cv_host+set}" = set; then :
+if ${ac_cv_host+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "x$host_alias" = x; then
   ac_cv_host=$ac_cv_build
 else
   ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
-    as_fn_error "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
+    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
 fi
 
 fi
@@ -3183,7 +3204,7 @@
 $as_echo "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical host" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
 esac
 host=$ac_cv_host
 ac_save_IFS=$IFS; IFS='-'
@@ -3201,14 +3222,14 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking target system type" >&5
 $as_echo_n "checking target system type... " >&6; }
-if test "${ac_cv_target+set}" = set; then :
+if ${ac_cv_target+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "x$target_alias" = x; then
   ac_cv_target=$ac_cv_host
 else
   ac_cv_target=`$SHELL "$ac_aux_dir/config.sub" $target_alias` ||
-    as_fn_error "$SHELL $ac_aux_dir/config.sub $target_alias failed" "$LINENO" 5
+    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $target_alias failed" "$LINENO" 5
 fi
 
 fi
@@ -3216,7 +3237,7 @@
 $as_echo "$ac_cv_target" >&6; }
 case $ac_cv_target in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical target" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical target" "$LINENO" 5;;
 esac
 target=$ac_cv_target
 ac_save_IFS=$IFS; IFS='-'
@@ -3306,6 +3327,9 @@
   rs6000)
     BuildArch="rs6000"
     ;;
+  s390x*)
+    BuildArch="s390x"
+    ;;
   s390*)
     BuildArch="s390"
     ;;
@@ -3403,6 +3427,9 @@
   rs6000)
     HostArch="rs6000"
     ;;
+  s390x*)
+    HostArch="s390x"
+    ;;
   s390*)
     HostArch="s390"
     ;;
@@ -3500,6 +3527,9 @@
   rs6000)
     TargetArch="rs6000"
     ;;
+  s390x*)
+    TargetArch="s390x"
+    ;;
   s390*)
     TargetArch="s390"
     ;;
@@ -3581,7 +3611,7 @@
 
 checkArch() {
     case $1 in
-    alpha|arm|hppa|hppa1_1|i386|ia64|m68k|mips|mipseb|mipsel|powerpc|powerpc64|rs6000|s390|sparc|sparc64|vax|x86_64)
+    alpha|arm|hppa|hppa1_1|i386|ia64|m68k|mips|mipseb|mipsel|powerpc|powerpc64|rs6000|s390|s390x|sparc|sparc64|vax|x86_64)
         ;;
     *)
         echo "Unknown arch $1"
@@ -3693,7 +3723,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_NHC+set}" = set; then :
+if ${ac_cv_path_NHC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $NHC in
@@ -3736,7 +3766,7 @@
 set dummy hbc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_HBC+set}" = set; then :
+if ${ac_cv_path_HBC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $HBC in
@@ -3779,9 +3809,9 @@
 $as_echo "$as_me: Building in-tree ghc-pwd" >&6;}
                 rm -rf utils/ghc-pwd/dist-boot
     mkdir  utils/ghc-pwd/dist-boot
-    if ! "$WithGhc" -v0 -no-user-package-conf -hidir utils/ghc-pwd/dist-boot -odir utils/ghc-pwd/dist-boot -stubdir utils/ghc-pwd/dist-boot --make utils/ghc-pwd/Main.hs -o utils/ghc-pwd/dist-boot/ghc-pwd
+    if ! "$WithGhc" -optl-pthread -v0 -no-user-package-conf -hidir utils/ghc-pwd/dist-boot -odir utils/ghc-pwd/dist-boot -stubdir utils/ghc-pwd/dist-boot --make utils/ghc-pwd/Main.hs -o utils/ghc-pwd/dist-boot/ghc-pwd
     then
-        as_fn_error "Building ghc-pwd failed" "$LINENO" 5
+        as_fn_error $? "Building ghc-pwd failed" "$LINENO" 5
     fi
 
     GHC_PWD=utils/ghc-pwd/dist-boot/ghc-pwd
@@ -3794,12 +3824,12 @@
         hardtop=`echo $hardtop | sed 's|^/tmp_mnt.*\(/local/.*\)$|\1|' | sed 's|^/tmp_mnt/|/|'`
 
     if ! test -d "$hardtop"; then
-        as_fn_error "cannot determine current directory" "$LINENO" 5
+        as_fn_error $? "cannot determine current directory" "$LINENO" 5
     fi
 
         case "$hardtop" in
     *' '*)
-        as_fn_error "
+        as_fn_error $? "
         The build system does not support building in a directory
         containing space characters.
         Suggestion: move the build tree somewhere else." "$LINENO" 5
@@ -3856,7 +3886,7 @@
         PATH=`pwd`/inplace/mingw/bin:$PATH inplace/mingw/bin/realgcc.exe driver/gcc/gcc.c driver/utils/cwrapper.c driver/utils/getLocation.c -Idriver/utils -o inplace/mingw/bin/gcc.exe
         if ! test -e inplace/mingw/bin/gcc.exe
         then
-            as_fn_error "GHC is required unless bootstrapping from .hc files." "$LINENO" 5
+            as_fn_error $? "GHC is required unless bootstrapping from .hc files." "$LINENO" 5
         fi
         { $as_echo "$as_me:${as_lineno-$LINENO}: In-tree mingw tree created" >&5
 $as_echo "$as_me: In-tree mingw tree created" >&6;}
@@ -3899,7 +3929,7 @@
 set dummy gcc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_CC+set}" = set; then :
+if ${ac_cv_path_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $CC in
@@ -3937,7 +3967,7 @@
 
         if test -z "$CC"
         then
-            as_fn_error "cannot find gcc in your PATH, no idea how to link" "$LINENO" 5
+            as_fn_error $? "cannot find gcc in your PATH, no idea how to link" "$LINENO" 5
         fi
     fi
 
@@ -3970,7 +4000,7 @@
 set dummy ld; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_LD+set}" = set; then :
+if ${ac_cv_path_LD+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $LD in
@@ -4008,7 +4038,7 @@
 
         if test -z "$LD"
         then
-            as_fn_error "cannot find ld in your PATH, no idea how to link" "$LINENO" 5
+            as_fn_error $? "cannot find ld in your PATH, no idea how to link" "$LINENO" 5
         fi
     fi
 
@@ -4040,7 +4070,7 @@
 set dummy nm; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_NM+set}" = set; then :
+if ${ac_cv_path_NM+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $NM in
@@ -4078,7 +4108,7 @@
 
         if test -z "$NM"
         then
-            as_fn_error "cannot find nm in your PATH, no idea how to link" "$LINENO" 5
+            as_fn_error $? "cannot find nm in your PATH, no idea how to link" "$LINENO" 5
         fi
     fi
 
@@ -4163,7 +4193,7 @@
 $as_echo "none" >&6; }
   else
     if test ! -d $MACOSX_DEPLOYMENT_SDK; then
-      as_fn_error "Unknown deployment target $FP_MACOSX_DEPLOYMENT_TARGET" "$LINENO" 5
+      as_fn_error $? "Unknown deployment target $FP_MACOSX_DEPLOYMENT_TARGET" "$LINENO" 5
     fi
     { $as_echo "$as_me:${as_lineno-$LINENO}: result: ${MACOSX_DEPLOYMENT_VERSION} (${MACOSX_DEPLOYMENT_SDK})" >&5
 $as_echo "${MACOSX_DEPLOYMENT_VERSION} (${MACOSX_DEPLOYMENT_SDK})" >&6; }
@@ -4186,7 +4216,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether #! works in shell scripts" >&5
 $as_echo_n "checking whether #! works in shell scripts... " >&6; }
-if test "${ac_cv_sys_interpreter+set}" = set; then :
+if ${ac_cv_sys_interpreter+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   echo '#! /bin/cat
@@ -4215,7 +4245,7 @@
 set dummy perl; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PerlCmd+set}" = set; then :
+if ${ac_cv_path_PerlCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PerlCmd in
@@ -4261,7 +4291,7 @@
    if grep "v5" conftest.out >/dev/null 2>&1; then
       :
    else
-      as_fn_error "your version of perl probably won't work, try upgrading it." "$LINENO" 5
+      as_fn_error $? "your version of perl probably won't work, try upgrading it." "$LINENO" 5
    fi
 rm -fr conftest*
 
@@ -4271,7 +4301,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if your perl works in shell scripts" >&5
 $as_echo_n "checking if your perl works in shell scripts... " >&6; }
-if test "${fptools_cv_shebang_perl+set}" = set; then :
+if ${fptools_cv_shebang_perl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   echo "#!$PerlCmd"'
@@ -4294,7 +4324,7 @@
 set dummy python; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PythonCmd+set}" = set; then :
+if ${ac_cv_path_PythonCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PythonCmd in
@@ -4341,7 +4371,7 @@
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -4381,7 +4411,7 @@
 set dummy gcc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_CC"; then
@@ -4434,7 +4464,7 @@
 set dummy ${ac_tool_prefix}cc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -4474,7 +4504,7 @@
 set dummy cc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -4533,7 +4563,7 @@
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -4577,7 +4607,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_CC"; then
@@ -4631,8 +4661,8 @@
 
 test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "no acceptable C compiler found in \$PATH
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "no acceptable C compiler found in \$PATH
+See \`config.log' for more details" "$LINENO" 5; }
 
 # Provide some information about the compiler.
 $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
@@ -4746,9 +4776,8 @@
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "C compiler cannot create executables
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "C compiler cannot create executables
+See \`config.log' for more details" "$LINENO" 5; }
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
@@ -4790,8 +4819,8 @@
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest conftest$ac_cv_exeext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
@@ -4848,9 +4877,9 @@
     else
 	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run C compiled programs.
+as_fn_error $? "cannot run C compiled programs.
 If you meant to cross compile, use \`--host'.
-See \`config.log' for more details." "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5; }
     fi
   fi
 fi
@@ -4861,7 +4890,7 @@
 ac_clean_files=$ac_clean_files_save
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
 $as_echo_n "checking for suffix of object files... " >&6; }
-if test "${ac_cv_objext+set}" = set; then :
+if ${ac_cv_objext+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -4901,8 +4930,8 @@
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot compute suffix of object files: cannot compile
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot compute suffix of object files: cannot compile
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
@@ -4912,7 +4941,7 @@
 ac_objext=$OBJEXT
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
 $as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
-if test "${ac_cv_c_compiler_gnu+set}" = set; then :
+if ${ac_cv_c_compiler_gnu+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -4949,7 +4978,7 @@
 ac_save_CFLAGS=$CFLAGS
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
 $as_echo_n "checking whether $CC accepts -g... " >&6; }
-if test "${ac_cv_prog_cc_g+set}" = set; then :
+if ${ac_cv_prog_cc_g+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_save_c_werror_flag=$ac_c_werror_flag
@@ -5027,7 +5056,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
 $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
-if test "${ac_cv_prog_cc_c89+set}" = set; then :
+if ${ac_cv_prog_cc_c89+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_prog_cc_c89=no
@@ -5129,12 +5158,12 @@
    fp_have_gcc=YES
 fi
 if test "$fp_have_gcc" = "NO" -a -d $srcdir/ghc; then
-  as_fn_error "gcc is required" "$LINENO" 5
+  as_fn_error $? "gcc is required" "$LINENO" 5
 fi
 GccLT34=
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking version of gcc" >&5
 $as_echo_n "checking version of gcc... " >&6; }
-if test "${fp_cv_gcc_version+set}" = set; then :
+if ${fp_cv_gcc_version+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$fp_have_gcc" = "YES"; then
@@ -5160,7 +5189,7 @@
 done
 IFS=$fp_save_IFS
 if test "$fp_num1" -lt "$fp_num2"; then :
-  as_fn_error "Need at least gcc version 3.0 (3.4+ recommended)" "$LINENO" 5
+  as_fn_error $? "Need at least gcc version 3.0 (3.4+ recommended)" "$LINENO" 5
 fi
    # See #2770: gcc 2.95 doesn't work any more, apparently.  There probably
    # isn't a very good reason for that, but for now just make configure
@@ -5339,7 +5368,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for extra options to pass gcc when compiling via C" >&5
 $as_echo_n "checking for extra options to pass gcc when compiling via C... " >&6; }
-if test "${fp_cv_gcc_extra_opts+set}" = set; then :
+if ${fp_cv_gcc_extra_opts+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   fp_cv_gcc_extra_opts=
@@ -5486,7 +5515,7 @@
   CPP=
 fi
 if test -z "$CPP"; then
-  if test "${ac_cv_prog_CPP+set}" = set; then :
+  if ${ac_cv_prog_CPP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
       # Double quotes because CPP needs to be expanded
@@ -5516,7 +5545,7 @@
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
@@ -5532,11 +5561,11 @@
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
   break
 fi
@@ -5575,7 +5604,7 @@
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
@@ -5591,18 +5620,18 @@
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
 
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 
 ac_ext=c
@@ -5627,7 +5656,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a working context diff" >&5
 $as_echo_n "checking for a working context diff... " >&6; }
-if test "${fp_cv_context_diff+set}" = set; then :
+if ${fp_cv_context_diff+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   echo foo > conftest1
@@ -5644,7 +5673,7 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $fp_cv_context_diff" >&5
 $as_echo "$fp_cv_context_diff" >&6; }
 if test x"$fp_cv_context_diff" = xno; then
-   as_fn_error "cannot figure out how to do context diffs" "$LINENO" 5
+   as_fn_error $? "cannot figure out how to do context diffs" "$LINENO" 5
 fi
 ContextDiffCmd=$fp_cv_context_diff
 
@@ -5668,7 +5697,7 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
 $as_echo_n "checking for a BSD-compatible install... " >&6; }
 if test -z "$INSTALL"; then
-if test "${ac_cv_path_install+set}" = set; then :
+if ${ac_cv_path_install+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -5753,7 +5782,7 @@
 set dummy ar; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_fp_prog_ar_raw+set}" = set; then :
+if ${ac_cv_path_fp_prog_ar_raw+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $fp_prog_ar_raw in
@@ -5790,7 +5819,7 @@
 
 
 if test -z "$fp_prog_ar_raw"; then
-  as_fn_error "cannot find ar in your PATH, no idea how to make a library" "$LINENO" 5
+  as_fn_error $? "cannot find ar in your PATH, no idea how to make a library" "$LINENO" 5
 fi
 fp_prog_ar="$fp_prog_ar_raw"
 case $HostPlatform in
@@ -5805,7 +5834,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $fp_prog_ar_raw is GNU ar" >&5
 $as_echo_n "checking whether $fp_prog_ar_raw is GNU ar... " >&6; }
-if test "${fp_cv_prog_ar_is_gnu+set}" = set; then :
+if ${fp_cv_prog_ar_is_gnu+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if "$fp_prog_ar_raw" --version 2> /dev/null | grep "GNU" > /dev/null 2>&1; then
@@ -5823,7 +5852,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ar arguments" >&5
 $as_echo_n "checking for ar arguments... " >&6; }
-if test "${fp_cv_prog_ar_args+set}" = set; then :
+if ${fp_cv_prog_ar_args+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -5843,7 +5872,7 @@
   done
   rm -f conftest*
   if test -z "$fp_cv_prog_ar_args"; then
-    as_fn_error "cannot figure out how to use your $fp_prog_ar_raw" "$LINENO" 5
+    as_fn_error $? "cannot figure out how to use your $fp_prog_ar_raw" "$LINENO" 5
   fi
 fi
 fi
@@ -5860,7 +5889,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $fp_prog_ar_raw supports @file" >&5
 $as_echo_n "checking whether $fp_prog_ar_raw supports @file... " >&6; }
-if test "${fp_cv_prog_ar_supports_atfile+set}" = set; then :
+if ${fp_cv_prog_ar_supports_atfile+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -5889,7 +5918,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ranlib is needed" >&5
 $as_echo_n "checking whether ranlib is needed... " >&6; }
-if test "${fp_cv_prog_ar_needs_ranlib+set}" = set; then :
+if ${fp_cv_prog_ar_needs_ranlib+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test $fp_prog_ar_is_gnu = yes; then
@@ -5912,7 +5941,7 @@
 set dummy ${ac_tool_prefix}ranlib; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_RANLIB+set}" = set; then :
+if ${ac_cv_prog_RANLIB+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$RANLIB"; then
@@ -5952,7 +5981,7 @@
 set dummy ranlib; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then :
+if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_RANLIB"; then
@@ -6008,7 +6037,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $fp_prog_ar_raw supports -input" >&5
 $as_echo_n "checking whether $fp_prog_ar_raw supports -input... " >&6; }
-if test "${fp_cv_prog_ar_supports_input+set}" = set; then :
+if ${fp_cv_prog_ar_supports_input+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   fp_cv_prog_ar_supports_input=no
@@ -6054,7 +6083,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_SedCmd+set}" = set; then :
+if ${ac_cv_path_SedCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $SedCmd in
@@ -6100,7 +6129,7 @@
 set dummy time; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_TimeCmd+set}" = set; then :
+if ${ac_cv_path_TimeCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $TimeCmd in
@@ -6143,7 +6172,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_TarCmd+set}" = set; then :
+if ${ac_cv_path_TarCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $TarCmd in
@@ -6190,7 +6219,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PatchCmd+set}" = set; then :
+if ${ac_cv_path_PatchCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PatchCmd in
@@ -6236,7 +6265,7 @@
 set dummy dtrace; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_DtraceCmd+set}" = set; then :
+if ${ac_cv_path_DtraceCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $DtraceCmd in
@@ -6283,7 +6312,7 @@
 set dummy HsColour; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_HSCOLOUR+set}" = set; then :
+if ${ac_cv_path_HSCOLOUR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $HSCOLOUR in
@@ -6332,7 +6361,7 @@
 set dummy xmllint; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_XmllintCmd+set}" = set; then :
+if ${ac_cv_path_XmllintCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $XmllintCmd in
@@ -6418,7 +6447,7 @@
 set dummy xsltproc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_XsltprocCmd+set}" = set; then :
+if ${ac_cv_path_XsltprocCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $XsltprocCmd in
@@ -6462,7 +6491,7 @@
 if test -n "$XsltprocCmd"; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DocBook XSL stylesheet" >&5
 $as_echo_n "checking for DocBook XSL stylesheet... " >&6; }
-if test "${fp_cv_dir_docbook_xsl+set}" = set; then :
+if ${fp_cv_dir_docbook_xsl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   rm -f conftest.xml conftest-book.xml
@@ -6511,7 +6540,7 @@
 set dummy dblatex; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_DblatexCmd+set}" = set; then :
+if ${ac_cv_path_DblatexCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $DblatexCmd in
@@ -6557,7 +6586,7 @@
 set dummy hasktags; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_HstagsCmd+set}" = set; then :
+if ${ac_cv_path_HstagsCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $HstagsCmd in
@@ -6601,7 +6630,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ghc-pkg matching $WithGhc" >&5
 $as_echo_n "checking for ghc-pkg matching $WithGhc... " >&6; }
-if test "${fp_cv_matching_ghc_pkg+set}" = set; then :
+if ${fp_cv_matching_ghc_pkg+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -6614,7 +6643,7 @@
 if "$fp_ghc_pkg_guess" list > /dev/null 2>&1; then
   fp_cv_matching_ghc_pkg=$fp_ghc_pkg_guess
 else
-  as_fn_error "Cannot find matching ghc-pkg" "$LINENO" 5
+  as_fn_error $? "Cannot find matching ghc-pkg" "$LINENO" 5
 fi
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $fp_cv_matching_ghc_pkg" >&5
@@ -6628,7 +6657,7 @@
 set dummy happy; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_HappyCmd+set}" = set; then :
+if ${ac_cv_path_HappyCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $HappyCmd in
@@ -6677,7 +6706,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for version of happy" >&5
 $as_echo_n "checking for version of happy... " >&6; }
-if test "${fptools_cv_happy_version+set}" = set; then :
+if ${fptools_cv_happy_version+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test x"$HappyCmd" != x; then
@@ -6713,7 +6742,7 @@
 done
 IFS=$fp_save_IFS
 if test "$fp_num1" -lt "$fp_num2"; then :
-  as_fn_error "Happy version 1.16 or later is required to compile GHC." "$LINENO" 5
+  as_fn_error $? "Happy version 1.16 or later is required to compile GHC." "$LINENO" 5
 fi
 fi
 HappyVersion=$fptools_cv_happy_version;
@@ -6727,7 +6756,7 @@
 set dummy alex; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_AlexCmd+set}" = set; then :
+if ${ac_cv_path_AlexCmd+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $AlexCmd in
@@ -6774,7 +6803,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for version of alex" >&5
 $as_echo_n "checking for version of alex... " >&6; }
-if test "${fptools_cv_alex_version+set}" = set; then :
+if ${fptools_cv_alex_version+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test x"$AlexCmd" != x; then
@@ -6810,7 +6839,7 @@
 done
 IFS=$fp_save_IFS
 if test "$fp_num1" -lt "$fp_num2"; then :
-  as_fn_error "Alex version 2.1.0 or later is required to compile GHC." "$LINENO" 5
+  as_fn_error $? "Alex version 2.1.0 or later is required to compile GHC." "$LINENO" 5
 fi
 fi
 AlexVersion=$fptools_cv_alex_version;
@@ -6824,7 +6853,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
 $as_echo_n "checking for grep that handles long lines and -e... " >&6; }
-if test "${ac_cv_path_GREP+set}" = set; then :
+if ${ac_cv_path_GREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -z "$GREP"; then
@@ -6873,7 +6902,7 @@
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_GREP"; then
-    as_fn_error "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_GREP=$GREP
@@ -6887,7 +6916,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
 $as_echo_n "checking for egrep... " >&6; }
-if test "${ac_cv_path_EGREP+set}" = set; then :
+if ${ac_cv_path_EGREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
@@ -6939,7 +6968,7 @@
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_EGREP"; then
-    as_fn_error "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_EGREP=$EGREP
@@ -6954,7 +6983,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
 $as_echo_n "checking for ANSI C header files... " >&6; }
-if test "${ac_cv_header_stdc+set}" = set; then :
+if ${ac_cv_header_stdc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -7074,7 +7103,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for special C compiler options needed for large files" >&5
 $as_echo_n "checking for special C compiler options needed for large files... " >&6; }
-if test "${ac_cv_sys_largefile_CC+set}" = set; then :
+if ${ac_cv_sys_largefile_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_sys_largefile_CC=no
@@ -7125,7 +7154,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _FILE_OFFSET_BITS value needed for large files" >&5
 $as_echo_n "checking for _FILE_OFFSET_BITS value needed for large files... " >&6; }
-if test "${ac_cv_sys_file_offset_bits+set}" = set; then :
+if ${ac_cv_sys_file_offset_bits+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   while :; do
@@ -7194,7 +7223,7 @@
   if test $ac_cv_sys_file_offset_bits = unknown; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _LARGE_FILES value needed for large files" >&5
 $as_echo_n "checking for _LARGE_FILES value needed for large files... " >&6; }
-if test "${ac_cv_sys_large_files+set}" = set; then :
+if ${ac_cv_sys_large_files+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   while :; do
@@ -7271,8 +7300,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -7286,8 +7314,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -7299,7 +7326,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether time.h and sys/time.h may both be included" >&5
 $as_echo_n "checking whether time.h and sys/time.h may both be included... " >&6; }
-if test "${ac_cv_header_time+set}" = set; then :
+if ${ac_cv_header_time+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -7334,7 +7361,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "long long" "ac_cv_type_long_long" "$ac_includes_default"
-if test "x$ac_cv_type_long_long" = x""yes; then :
+if test "x$ac_cv_type_long_long" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_LONG_LONG 1
@@ -7350,7 +7377,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of char" >&5
 $as_echo_n "checking size of char... " >&6; }
-if test "${ac_cv_sizeof_char+set}" = set; then :
+if ${ac_cv_sizeof_char+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (char))" "ac_cv_sizeof_char"        "$ac_includes_default"; then :
@@ -7359,9 +7386,8 @@
   if test "$ac_cv_type_char" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (char)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (char)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_char=0
    fi
@@ -7384,7 +7410,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of double" >&5
 $as_echo_n "checking size of double... " >&6; }
-if test "${ac_cv_sizeof_double+set}" = set; then :
+if ${ac_cv_sizeof_double+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (double))" "ac_cv_sizeof_double"        "$ac_includes_default"; then :
@@ -7393,9 +7419,8 @@
   if test "$ac_cv_type_double" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (double)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (double)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_double=0
    fi
@@ -7418,7 +7443,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of float" >&5
 $as_echo_n "checking size of float... " >&6; }
-if test "${ac_cv_sizeof_float+set}" = set; then :
+if ${ac_cv_sizeof_float+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (float))" "ac_cv_sizeof_float"        "$ac_includes_default"; then :
@@ -7427,9 +7452,8 @@
   if test "$ac_cv_type_float" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (float)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (float)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_float=0
    fi
@@ -7452,7 +7476,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
 $as_echo_n "checking size of int... " >&6; }
-if test "${ac_cv_sizeof_int+set}" = set; then :
+if ${ac_cv_sizeof_int+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :
@@ -7461,9 +7485,8 @@
   if test "$ac_cv_type_int" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (int)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (int)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_int=0
    fi
@@ -7486,7 +7509,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
 $as_echo_n "checking size of long... " >&6; }
-if test "${ac_cv_sizeof_long+set}" = set; then :
+if ${ac_cv_sizeof_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :
@@ -7495,9 +7518,8 @@
   if test "$ac_cv_type_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_long=0
    fi
@@ -7521,7 +7543,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long long" >&5
 $as_echo_n "checking size of long long... " >&6; }
-if test "${ac_cv_sizeof_long_long+set}" = set; then :
+if ${ac_cv_sizeof_long_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long long))" "ac_cv_sizeof_long_long"        "$ac_includes_default"; then :
@@ -7530,9 +7552,8 @@
   if test "$ac_cv_type_long_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (long long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (long long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_long_long=0
    fi
@@ -7556,7 +7577,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of short" >&5
 $as_echo_n "checking size of short... " >&6; }
-if test "${ac_cv_sizeof_short+set}" = set; then :
+if ${ac_cv_sizeof_short+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (short))" "ac_cv_sizeof_short"        "$ac_includes_default"; then :
@@ -7565,9 +7586,8 @@
   if test "$ac_cv_type_short" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (short)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (short)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_short=0
    fi
@@ -7590,7 +7610,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of unsigned char" >&5
 $as_echo_n "checking size of unsigned char... " >&6; }
-if test "${ac_cv_sizeof_unsigned_char+set}" = set; then :
+if ${ac_cv_sizeof_unsigned_char+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (unsigned char))" "ac_cv_sizeof_unsigned_char"        "$ac_includes_default"; then :
@@ -7599,9 +7619,8 @@
   if test "$ac_cv_type_unsigned_char" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (unsigned char)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (unsigned char)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_unsigned_char=0
    fi
@@ -7624,7 +7643,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of unsigned int" >&5
 $as_echo_n "checking size of unsigned int... " >&6; }
-if test "${ac_cv_sizeof_unsigned_int+set}" = set; then :
+if ${ac_cv_sizeof_unsigned_int+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (unsigned int))" "ac_cv_sizeof_unsigned_int"        "$ac_includes_default"; then :
@@ -7633,9 +7652,8 @@
   if test "$ac_cv_type_unsigned_int" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (unsigned int)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (unsigned int)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_unsigned_int=0
    fi
@@ -7658,7 +7676,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of unsigned long" >&5
 $as_echo_n "checking size of unsigned long... " >&6; }
-if test "${ac_cv_sizeof_unsigned_long+set}" = set; then :
+if ${ac_cv_sizeof_unsigned_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (unsigned long))" "ac_cv_sizeof_unsigned_long"        "$ac_includes_default"; then :
@@ -7667,9 +7685,8 @@
   if test "$ac_cv_type_unsigned_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (unsigned long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (unsigned long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_unsigned_long=0
    fi
@@ -7693,7 +7710,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of unsigned long long" >&5
 $as_echo_n "checking size of unsigned long long... " >&6; }
-if test "${ac_cv_sizeof_unsigned_long_long+set}" = set; then :
+if ${ac_cv_sizeof_unsigned_long_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (unsigned long long))" "ac_cv_sizeof_unsigned_long_long"        "$ac_includes_default"; then :
@@ -7702,9 +7719,8 @@
   if test "$ac_cv_type_unsigned_long_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (unsigned long long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (unsigned long long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_unsigned_long_long=0
    fi
@@ -7728,7 +7744,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of unsigned short" >&5
 $as_echo_n "checking size of unsigned short... " >&6; }
-if test "${ac_cv_sizeof_unsigned_short+set}" = set; then :
+if ${ac_cv_sizeof_unsigned_short+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (unsigned short))" "ac_cv_sizeof_unsigned_short"        "$ac_includes_default"; then :
@@ -7737,9 +7753,8 @@
   if test "$ac_cv_type_unsigned_short" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (unsigned short)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (unsigned short)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_unsigned_short=0
    fi
@@ -7762,7 +7777,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of void *" >&5
 $as_echo_n "checking size of void *... " >&6; }
-if test "${ac_cv_sizeof_void_p+set}" = set; then :
+if ${ac_cv_sizeof_void_p+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (void *))" "ac_cv_sizeof_void_p"        "$ac_includes_default"; then :
@@ -7771,9 +7786,8 @@
   if test "$ac_cv_type_void_p" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (void *)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (void *)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_void_p=0
    fi
@@ -7792,21 +7806,20 @@
 
 
 ac_fn_c_check_type "$LINENO" "char" "ac_cv_type_char" "$ac_includes_default"
-if test "x$ac_cv_type_char" = x""yes; then :
+if test "x$ac_cv_type_char" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of char" >&5
 $as_echo_n "checking alignment of char... " >&6; }
-if test "${fp_cv_alignment_char+set}" = set; then :
+if ${fp_cv_alignment_char+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_char" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; char ty; } *)0)->ty)" "fp_cv_alignment_char"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (char)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (char)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -7821,21 +7834,20 @@
 _ACEOF
 
 ac_fn_c_check_type "$LINENO" "double" "ac_cv_type_double" "$ac_includes_default"
-if test "x$ac_cv_type_double" = x""yes; then :
+if test "x$ac_cv_type_double" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of double" >&5
 $as_echo_n "checking alignment of double... " >&6; }
-if test "${fp_cv_alignment_double+set}" = set; then :
+if ${fp_cv_alignment_double+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_double" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; double ty; } *)0)->ty)" "fp_cv_alignment_double"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (double)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (double)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -7850,21 +7862,20 @@
 _ACEOF
 
 ac_fn_c_check_type "$LINENO" "float" "ac_cv_type_float" "$ac_includes_default"
-if test "x$ac_cv_type_float" = x""yes; then :
+if test "x$ac_cv_type_float" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of float" >&5
 $as_echo_n "checking alignment of float... " >&6; }
-if test "${fp_cv_alignment_float+set}" = set; then :
+if ${fp_cv_alignment_float+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_float" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; float ty; } *)0)->ty)" "fp_cv_alignment_float"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (float)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (float)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -7879,21 +7890,20 @@
 _ACEOF
 
 ac_fn_c_check_type "$LINENO" "int" "ac_cv_type_int" "$ac_includes_default"
-if test "x$ac_cv_type_int" = x""yes; then :
+if test "x$ac_cv_type_int" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of int" >&5
 $as_echo_n "checking alignment of int... " >&6; }
-if test "${fp_cv_alignment_int+set}" = set; then :
+if ${fp_cv_alignment_int+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_int" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; int ty; } *)0)->ty)" "fp_cv_alignment_int"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (int)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (int)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -7908,21 +7918,20 @@
 _ACEOF
 
 ac_fn_c_check_type "$LINENO" "long" "ac_cv_type_long" "$ac_includes_default"
-if test "x$ac_cv_type_long" = x""yes; then :
+if test "x$ac_cv_type_long" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of long" >&5
 $as_echo_n "checking alignment of long... " >&6; }
-if test "${fp_cv_alignment_long+set}" = set; then :
+if ${fp_cv_alignment_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_long" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; long ty; } *)0)->ty)" "fp_cv_alignment_long"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (long)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (long)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -7938,21 +7947,20 @@
 
 if test "$ac_cv_type_long_long" = yes; then
 ac_fn_c_check_type "$LINENO" "long long" "ac_cv_type_long_long" "$ac_includes_default"
-if test "x$ac_cv_type_long_long" = x""yes; then :
+if test "x$ac_cv_type_long_long" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of long long" >&5
 $as_echo_n "checking alignment of long long... " >&6; }
-if test "${fp_cv_alignment_long_long+set}" = set; then :
+if ${fp_cv_alignment_long_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_long_long" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; long long ty; } *)0)->ty)" "fp_cv_alignment_long_long"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (long long)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (long long)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -7968,21 +7976,20 @@
 
 fi
 ac_fn_c_check_type "$LINENO" "short" "ac_cv_type_short" "$ac_includes_default"
-if test "x$ac_cv_type_short" = x""yes; then :
+if test "x$ac_cv_type_short" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of short" >&5
 $as_echo_n "checking alignment of short... " >&6; }
-if test "${fp_cv_alignment_short+set}" = set; then :
+if ${fp_cv_alignment_short+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_short" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; short ty; } *)0)->ty)" "fp_cv_alignment_short"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (short)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (short)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -7997,21 +8004,20 @@
 _ACEOF
 
 ac_fn_c_check_type "$LINENO" "unsigned char" "ac_cv_type_unsigned_char" "$ac_includes_default"
-if test "x$ac_cv_type_unsigned_char" = x""yes; then :
+if test "x$ac_cv_type_unsigned_char" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of unsigned char" >&5
 $as_echo_n "checking alignment of unsigned char... " >&6; }
-if test "${fp_cv_alignment_unsigned_char+set}" = set; then :
+if ${fp_cv_alignment_unsigned_char+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_unsigned_char" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; unsigned char ty; } *)0)->ty)" "fp_cv_alignment_unsigned_char"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (unsigned char)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (unsigned char)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -8026,21 +8032,20 @@
 _ACEOF
 
 ac_fn_c_check_type "$LINENO" "unsigned int" "ac_cv_type_unsigned_int" "$ac_includes_default"
-if test "x$ac_cv_type_unsigned_int" = x""yes; then :
+if test "x$ac_cv_type_unsigned_int" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of unsigned int" >&5
 $as_echo_n "checking alignment of unsigned int... " >&6; }
-if test "${fp_cv_alignment_unsigned_int+set}" = set; then :
+if ${fp_cv_alignment_unsigned_int+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_unsigned_int" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; unsigned int ty; } *)0)->ty)" "fp_cv_alignment_unsigned_int"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (unsigned int)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (unsigned int)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -8055,21 +8060,20 @@
 _ACEOF
 
 ac_fn_c_check_type "$LINENO" "unsigned long" "ac_cv_type_unsigned_long" "$ac_includes_default"
-if test "x$ac_cv_type_unsigned_long" = x""yes; then :
+if test "x$ac_cv_type_unsigned_long" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of unsigned long" >&5
 $as_echo_n "checking alignment of unsigned long... " >&6; }
-if test "${fp_cv_alignment_unsigned_long+set}" = set; then :
+if ${fp_cv_alignment_unsigned_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_unsigned_long" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; unsigned long ty; } *)0)->ty)" "fp_cv_alignment_unsigned_long"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (unsigned long)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (unsigned long)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -8085,21 +8089,20 @@
 
 if test "$ac_cv_type_long_long" = yes; then
 ac_fn_c_check_type "$LINENO" "unsigned long long" "ac_cv_type_unsigned_long_long" "$ac_includes_default"
-if test "x$ac_cv_type_unsigned_long_long" = x""yes; then :
+if test "x$ac_cv_type_unsigned_long_long" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of unsigned long long" >&5
 $as_echo_n "checking alignment of unsigned long long... " >&6; }
-if test "${fp_cv_alignment_unsigned_long_long+set}" = set; then :
+if ${fp_cv_alignment_unsigned_long_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_unsigned_long_long" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; unsigned long long ty; } *)0)->ty)" "fp_cv_alignment_unsigned_long_long"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (unsigned long long)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (unsigned long long)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -8115,21 +8118,20 @@
 
 fi
 ac_fn_c_check_type "$LINENO" "unsigned short" "ac_cv_type_unsigned_short" "$ac_includes_default"
-if test "x$ac_cv_type_unsigned_short" = x""yes; then :
+if test "x$ac_cv_type_unsigned_short" = xyes; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of unsigned short" >&5
 $as_echo_n "checking alignment of unsigned short... " >&6; }
-if test "${fp_cv_alignment_unsigned_short+set}" = set; then :
+if ${fp_cv_alignment_unsigned_short+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_unsigned_short" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; unsigned short ty; } *)0)->ty)" "fp_cv_alignment_unsigned_short"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (unsigned short)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (unsigned short)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -8143,22 +8145,22 @@
 #define ALIGNMENT_UNSIGNED_SHORT $fp_cv_alignment_unsigned_short
 _ACEOF
 
-ac_fn_c_check_type "$LINENO" "void *" "ac_cv_type_void_p" "$ac_includes_default"
-if test "x$ac_cv_type_void_p" = x""yes; then :
+as_ac_Type=`$as_echo "ac_cv_type_void *" | $as_tr_sh`
+ac_fn_c_check_type "$LINENO" "void *" "$as_ac_Type" "$ac_includes_default"
+if eval test \"x\$"$as_ac_Type"\" = x"yes"; then :
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking alignment of void *" >&5
 $as_echo_n "checking alignment of void *... " >&6; }
-if test "${fp_cv_alignment_void_p+set}" = set; then :
+if ${fp_cv_alignment_void_p+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$ac_cv_type_void_p" = yes; then
   if ac_fn_c_compute_int "$LINENO" "(long) (&((struct { char c; void * ty; } *)0)->ty)" "fp_cv_alignment_void_p"        "$ac_includes_default"; then :
 
 else
-  { as_fn_set_status 77
-as_fn_error "cannot compute alignment (void *)
-See \`config.log' for more details." "$LINENO" 5; }
+  as_fn_error 77 "cannot compute alignment (void *)
+See \`config.log' for more details." "$LINENO" 5
 fi
 
 
@@ -8175,7 +8177,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for WinExec" >&5
 $as_echo_n "checking for WinExec... " >&6; }
-if test "${fp_cv_func_WinExec+set}" = set; then :
+if ${fp_cv_func_WinExec+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8207,7 +8209,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GetModuleFileName" >&5
 $as_echo_n "checking for GetModuleFileName... " >&6; }
-if test "${fp_cv_func_GetModuleFileName+set}" = set; then :
+if ${fp_cv_func_GetModuleFileName+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8240,7 +8242,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking return type of signal handlers" >&5
 $as_echo_n "checking return type of signal handlers... " >&6; }
-if test "${ac_cv_type_signal+set}" = set; then :
+if ${ac_cv_type_signal+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8281,8 +8283,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8294,8 +8295,8 @@
 if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -8325,7 +8326,7 @@
 #define _POSIX_C_SOURCE 199506L
 #include <time.h>
 "
-if test "x$ac_cv_have_decl_ctime_r" = x""yes; then :
+if test "x$ac_cv_have_decl_ctime_r" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -8338,7 +8339,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for closedir in -lmingwex" >&5
 $as_echo_n "checking for closedir in -lmingwex... " >&6; }
-if test "${ac_cv_lib_mingwex_closedir+set}" = set; then :
+if ${ac_cv_lib_mingwex_closedir+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -8372,7 +8373,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_mingwex_closedir" >&5
 $as_echo "$ac_cv_lib_mingwex_closedir" >&6; }
-if test "x$ac_cv_lib_mingwex_closedir" = x""yes; then :
+if test "x$ac_cv_lib_mingwex_closedir" = xyes; then :
   HaveLibMingwEx=YES
 else
   HaveLibMingwEx=NO
@@ -8388,7 +8389,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for atan in -lm" >&5
 $as_echo_n "checking for atan in -lm... " >&6; }
-if test "${ac_cv_lib_m_atan+set}" = set; then :
+if ${ac_cv_lib_m_atan+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -8422,7 +8423,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_m_atan" >&5
 $as_echo "$ac_cv_lib_m_atan" >&6; }
-if test "x$ac_cv_lib_m_atan" = x""yes; then :
+if test "x$ac_cv_lib_m_atan" = xyes; then :
   HaveLibM=YES
 else
   HaveLibM=NO
@@ -8437,7 +8438,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for xmalloc in -liberty" >&5
 $as_echo_n "checking for xmalloc in -liberty... " >&6; }
-if test "${ac_cv_lib_iberty_xmalloc+set}" = set; then :
+if ${ac_cv_lib_iberty_xmalloc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -8471,7 +8472,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_iberty_xmalloc" >&5
 $as_echo "$ac_cv_lib_iberty_xmalloc" >&6; }
-if test "x$ac_cv_lib_iberty_xmalloc" = x""yes; then :
+if test "x$ac_cv_lib_iberty_xmalloc" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBIBERTY 1
 _ACEOF
@@ -8482,7 +8483,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bfd_init in -lbfd" >&5
 $as_echo_n "checking for bfd_init in -lbfd... " >&6; }
-if test "${ac_cv_lib_bfd_bfd_init+set}" = set; then :
+if ${ac_cv_lib_bfd_bfd_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -8516,7 +8517,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bfd_bfd_init" >&5
 $as_echo "$ac_cv_lib_bfd_bfd_init" >&6; }
-if test "x$ac_cv_lib_bfd_bfd_init" = x""yes; then :
+if test "x$ac_cv_lib_bfd_bfd_init" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBBFD 1
 _ACEOF
@@ -8530,7 +8531,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
 $as_echo_n "checking for dlopen in -ldl... " >&6; }
-if test "${ac_cv_lib_dl_dlopen+set}" = set; then :
+if ${ac_cv_lib_dl_dlopen+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -8564,7 +8565,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
 $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
-if test "x$ac_cv_lib_dl_dlopen" = x""yes; then :
+if test "x$ac_cv_lib_dl_dlopen" = xyes; then :
   HaveLibDL=YES
 
 $as_echo "#define HAVE_LIBDL 1" >>confdefs.h
@@ -8577,11 +8578,22 @@
 
 
 
+ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
+if test "x$ac_cv_type_size_t" = xyes; then :
+
+else
+
+cat >>confdefs.h <<_ACEOF
+#define size_t unsigned int
+_ACEOF
+
+fi
+
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working alloca.h" >&5
 $as_echo_n "checking for working alloca.h... " >&6; }
-if test "${ac_cv_working_alloca_h+set}" = set; then :
+if ${ac_cv_working_alloca_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8614,7 +8626,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for alloca" >&5
 $as_echo_n "checking for alloca... " >&6; }
-if test "${ac_cv_func_alloca_works+set}" = set; then :
+if ${ac_cv_func_alloca_works+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8633,7 +8645,7 @@
  #pragma alloca
 #   else
 #    ifndef alloca /* predefined by HP cc +Olibcalls */
-char *alloca ();
+void *alloca (size_t);
 #    endif
 #   endif
 #  endif
@@ -8677,7 +8689,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether \`alloca.c' needs Cray hooks" >&5
 $as_echo_n "checking whether \`alloca.c' needs Cray hooks... " >&6; }
-if test "${ac_cv_os_cray+set}" = set; then :
+if ${ac_cv_os_cray+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8704,8 +8716,7 @@
   for ac_func in _getb67 GETB67 getb67; do
     as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
 
 cat >>confdefs.h <<_ACEOF
 #define CRAY_STACKSEG_END $ac_func
@@ -8719,7 +8730,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking stack direction for C alloca" >&5
 $as_echo_n "checking stack direction for C alloca... " >&6; }
-if test "${ac_cv_c_stack_direction+set}" = set; then :
+if ${ac_cv_c_stack_direction+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -8769,7 +8780,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "pid_t" "ac_cv_type_pid_t" "$ac_includes_default"
-if test "x$ac_cv_type_pid_t" = x""yes; then :
+if test "x$ac_cv_type_pid_t" = xyes; then :
 
 else
 
@@ -8782,7 +8793,7 @@
 for ac_header in vfork.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "vfork.h" "ac_cv_header_vfork_h" "$ac_includes_default"
-if test "x$ac_cv_header_vfork_h" = x""yes; then :
+if test "x$ac_cv_header_vfork_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_VFORK_H 1
 _ACEOF
@@ -8795,8 +8806,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8807,7 +8817,7 @@
 if test "x$ac_cv_func_fork" = xyes; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working fork" >&5
 $as_echo_n "checking for working fork... " >&6; }
-if test "${ac_cv_func_fork_works+set}" = set; then :
+if ${ac_cv_func_fork_works+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -8860,7 +8870,7 @@
 if test "x$ac_cv_func_vfork" = xyes; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working vfork" >&5
 $as_echo_n "checking for working vfork... " >&6; }
-if test "${ac_cv_func_vfork_works+set}" = set; then :
+if ${ac_cv_func_vfork_works+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -8996,7 +9006,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
 $as_echo_n "checking for an ANSI C-conforming const... " >&6; }
-if test "${ac_cv_c_const+set}" = set; then :
+if ${ac_cv_c_const+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -9077,7 +9087,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether byte ordering is bigendian" >&5
 $as_echo_n "checking whether byte ordering is bigendian... " >&6; }
-if test "${ac_cv_c_bigendian+set}" = set; then :
+if ${ac_cv_c_bigendian+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_c_bigendian=unknown
@@ -9295,13 +9305,13 @@
 
      ;; #(
    *)
-     as_fn_error "unknown endianness
+     as_fn_error $? "unknown endianness
  presetting ac_cv_c_bigendian=no (or yes) will help" "$LINENO" 5 ;;
  esac
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether float word order is big endian" >&5
 $as_echo_n "checking whether float word order is big endian... " >&6; }
-if test "${fptools_cv_float_word_order_bigendian+set}" = set; then :
+if ${fptools_cv_float_word_order_bigendian+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -9340,7 +9350,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nlist in -lelf" >&5
 $as_echo_n "checking for nlist in -lelf... " >&6; }
-if test "${ac_cv_lib_elf_nlist+set}" = set; then :
+if ${ac_cv_lib_elf_nlist+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -9374,13 +9384,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_elf_nlist" >&5
 $as_echo "$ac_cv_lib_elf_nlist" >&6; }
-if test "x$ac_cv_lib_elf_nlist" = x""yes; then :
+if test "x$ac_cv_lib_elf_nlist" = xyes; then :
   LIBS="-lelf $LIBS"
 fi
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking leading underscore in symbol names" >&5
 $as_echo_n "checking leading underscore in symbol names... " >&6; }
-if test "${fptools_cv_leading_underscore+set}" = set; then :
+if ${fptools_cv_leading_underscore+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9451,7 +9461,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ld understands -x" >&5
 $as_echo_n "checking whether ld understands -x... " >&6; }
-if test "${fp_cv_ld_x+set}" = set; then :
+if ${fp_cv_ld_x+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   echo 'foo() {}' > conftest.c
@@ -9475,7 +9485,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ld is GNU ld" >&5
 $as_echo_n "checking whether ld is GNU ld... " >&6; }
-if test "${fp_cv_gnu_ld+set}" = set; then :
+if ${fp_cv_gnu_ld+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ${LdCmd} --version 2> /dev/null | grep "GNU" > /dev/null 2>&1; then
@@ -9550,7 +9560,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for clock_gettime in -lrt" >&5
 $as_echo_n "checking for clock_gettime in -lrt... " >&6; }
-if test "${ac_cv_lib_rt_clock_gettime+set}" = set; then :
+if ${ac_cv_lib_rt_clock_gettime+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -9584,7 +9594,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_rt_clock_gettime" >&5
 $as_echo "$ac_cv_lib_rt_clock_gettime" >&6; }
-if test "x$ac_cv_lib_rt_clock_gettime" = x""yes; then :
+if test "x$ac_cv_lib_rt_clock_gettime" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBRT 1
 _ACEOF
@@ -9597,8 +9607,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -9608,14 +9617,14 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a working timer_create(CLOCK_REALTIME)" >&5
 $as_echo_n "checking for a working timer_create(CLOCK_REALTIME)... " >&6; }
-if test "${fptools_cv_timer_create_works+set}" = set; then :
+if ${fptools_cv_timer_create_works+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -9797,7 +9806,7 @@
 for ac_header in sys/eventfd.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/eventfd.h" "ac_cv_header_sys_eventfd_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_eventfd_h" = x""yes; then :
+if test "x$ac_cv_header_sys_eventfd_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_EVENTFD_H 1
 _ACEOF
@@ -9809,7 +9818,7 @@
 for ac_func in eventfd
 do :
   ac_fn_c_check_func "$LINENO" "eventfd" "ac_cv_func_eventfd"
-if test "x$ac_cv_func_eventfd" = x""yes; then :
+if test "x$ac_cv_func_eventfd" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_EVENTFD 1
 _ACEOF
@@ -9825,7 +9834,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_GTK_CONFIG+set}" = set; then :
+if ${ac_cv_path_GTK_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $GTK_CONFIG in
@@ -9878,7 +9887,7 @@
 #Checking for PAPI
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PAPI_library_init in -lpapi" >&5
 $as_echo_n "checking for PAPI_library_init in -lpapi... " >&6; }
-if test "${ac_cv_lib_papi_PAPI_library_init+set}" = set; then :
+if ${ac_cv_lib_papi_PAPI_library_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -9912,14 +9921,14 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_papi_PAPI_library_init" >&5
 $as_echo "$ac_cv_lib_papi_PAPI_library_init" >&6; }
-if test "x$ac_cv_lib_papi_PAPI_library_init" = x""yes; then :
+if test "x$ac_cv_lib_papi_PAPI_library_init" = xyes; then :
   HavePapiLib=YES
 else
   HavePapiLib=NO
 fi
 
 ac_fn_c_check_header_mongrel "$LINENO" "papi.h" "ac_cv_header_papi_h" "$ac_includes_default"
-if test "x$ac_cv_header_papi_h" = x""yes; then :
+if test "x$ac_cv_header_papi_h" = xyes; then :
   HavePapiHeader=YES
 else
   HavePapiHeader=NO
@@ -9932,7 +9941,7 @@
 for ac_func in __mingw_vfprintf
 do :
   ac_fn_c_check_func "$LINENO" "__mingw_vfprintf" "ac_cv_func___mingw_vfprintf"
-if test "x$ac_cv_func___mingw_vfprintf" = x""yes; then :
+if test "x$ac_cv_func___mingw_vfprintf" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE___MINGW_VFPRINTF 1
 _ACEOF
@@ -9984,7 +9993,7 @@
 
 
 if grep '	' compiler/ghc.cabal.in 2>&1 >/dev/null; then
-   as_fn_error "compiler/ghc.cabal.in contains tab characters; please remove them" "$LINENO" 5
+   as_fn_error $? "compiler/ghc.cabal.in contains tab characters; please remove them" "$LINENO" 5
 fi
 
 ac_config_files="$ac_config_files mk/config.mk mk/install.mk mk/project.mk compiler/ghc.cabal ghc/ghc-bin.cabal utils/runghc/runghc.cabal ghc.spec extra-gcc-opts docs/users_guide/ug-book.xml docs/users_guide/ug-ent.xml docs/index.html libraries/prologue.txt distrib/ghc.iss distrib/configure.ac"
@@ -10055,10 +10064,21 @@
      :end' >>confcache
 if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
   if test -w "$cache_file"; then
-    test "x$cache_file" != "x/dev/null" &&
+    if test "x$cache_file" != "x/dev/null"; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
 $as_echo "$as_me: updating cache $cache_file" >&6;}
-    cat confcache >$cache_file
+      if test ! -f "$cache_file" || test -h "$cache_file"; then
+	cat confcache >"$cache_file"
+      else
+        case $cache_file in #(
+        */* | ?:*)
+	  mv -f confcache "$cache_file"$$ &&
+	  mv -f "$cache_file"$$ "$cache_file" ;; #(
+        *)
+	  mv -f confcache "$cache_file" ;;
+	esac
+      fi
+    fi
   else
     { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
 $as_echo "$as_me: not updating unwritable cache $cache_file" >&6;}
@@ -10074,6 +10094,7 @@
 
 ac_libobjs=
 ac_ltlibobjs=
+U=
 for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
   # 1. Remove the extension, and $U if already installed.
   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
@@ -10090,7 +10111,7 @@
 
 
 
-: ${CONFIG_STATUS=./config.status}
+: "${CONFIG_STATUS=./config.status}"
 ac_write_fail=0
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files $CONFIG_STATUS"
@@ -10191,6 +10212,7 @@
 IFS=" ""	$as_nl"
 
 # Find who we are.  Look in the path if we contain no directory separator.
+as_myself=
 case $0 in #((
   *[\\/]* ) as_myself=$0 ;;
   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -10236,19 +10258,19 @@
 (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 
-# as_fn_error ERROR [LINENO LOG_FD]
-# ---------------------------------
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with status $?, using 1 if that was 0.
+# script with STATUS, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$?; test $as_status -eq 0 && as_status=1
-  if test "$3"; then
-    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $1" >&2
+  $as_echo "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
@@ -10444,7 +10466,7 @@
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
@@ -10498,7 +10520,7 @@
 # values after options handling.
 ac_log="
 This file was extended by The Glorious Glasgow Haskell Compilation System $as_me 7.0.4, which was
-generated by GNU Autoconf 2.65.  Invocation command line was
+generated by GNU Autoconf 2.68.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
@@ -10564,10 +10586,10 @@
 ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
 ac_cs_version="\\
 The Glorious Glasgow Haskell Compilation System config.status 7.0.4
-configured by $0, generated by GNU Autoconf 2.65,
+configured by $0, generated by GNU Autoconf 2.68,
   with options \\"\$ac_cs_config\\"
 
-Copyright (C) 2009 Free Software Foundation, Inc.
+Copyright (C) 2010 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
 
@@ -10583,11 +10605,16 @@
 while test $# != 0
 do
   case $1 in
-  --*=*)
+  --*=?*)
     ac_option=`expr "X$1" : 'X\([^=]*\)='`
     ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
     ac_shift=:
     ;;
+  --*=)
+    ac_option=`expr "X$1" : 'X\([^=]*\)='`
+    ac_optarg=
+    ac_shift=:
+    ;;
   *)
     ac_option=$1
     ac_optarg=$2
@@ -10609,6 +10636,7 @@
     $ac_shift
     case $ac_optarg in
     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    '') as_fn_error $? "missing file argument" ;;
     esac
     as_fn_append CONFIG_FILES " '$ac_optarg'"
     ac_need_defaults=false;;
@@ -10621,7 +10649,7 @@
     ac_need_defaults=false;;
   --he | --h)
     # Conflict between --help and --header
-    as_fn_error "ambiguous option: \`$1'
+    as_fn_error $? "ambiguous option: \`$1'
 Try \`$0 --help' for more information.";;
   --help | --hel | -h )
     $as_echo "$ac_cs_usage"; exit ;;
@@ -10630,7 +10658,7 @@
     ac_cs_silent=: ;;
 
   # This is an error.
-  -*) as_fn_error "unrecognized option: \`$1'
+  -*) as_fn_error $? "unrecognized option: \`$1'
 Try \`$0 --help' for more information." ;;
 
   *) as_fn_append ac_config_targets " $1"
@@ -10696,7 +10724,7 @@
     "distrib/configure.ac") CONFIG_FILES="$CONFIG_FILES distrib/configure.ac" ;;
     "mk/stamp-h") CONFIG_COMMANDS="$CONFIG_COMMANDS mk/stamp-h" ;;
 
-  *) as_fn_error "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
+  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
   esac
 done
 
@@ -10719,9 +10747,10 @@
 # after its creation but before its name has been assigned to `$tmp'.
 $debug ||
 {
-  tmp=
+  tmp= ac_tmp=
   trap 'exit_status=$?
-  { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
+  : "${ac_tmp:=$tmp}"
+  { test ! -d "$ac_tmp" || rm -fr "$ac_tmp"; } && exit $exit_status
 ' 0
   trap 'as_fn_exit 1' 1 2 13 15
 }
@@ -10729,12 +10758,13 @@
 
 {
   tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
-  test -n "$tmp" && test -d "$tmp"
+  test -d "$tmp"
 }  ||
 {
   tmp=./conf$$-$RANDOM
   (umask 077 && mkdir "$tmp")
-} || as_fn_error "cannot create a temporary directory in ." "$LINENO" 5
+} || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
+ac_tmp=$tmp
 
 # Set up the scripts for CONFIG_FILES section.
 # No need to generate them if there are no CONFIG_FILES.
@@ -10751,12 +10781,12 @@
 fi
 ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
 if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
-  ac_cs_awk_cr='\r'
+  ac_cs_awk_cr='\\r'
 else
   ac_cs_awk_cr=$ac_cr
 fi
 
-echo 'BEGIN {' >"$tmp/subs1.awk" &&
+echo 'BEGIN {' >"$ac_tmp/subs1.awk" &&
 _ACEOF
 
 
@@ -10765,18 +10795,18 @@
   echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
   echo "_ACEOF"
 } >conf$$subs.sh ||
-  as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
-ac_delim_num=`echo "$ac_subst_vars" | grep -c '$'`
+  as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
 ac_delim='%!_!# '
 for ac_last_try in false false false false false :; do
   . ./conf$$subs.sh ||
-    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
 
   ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
   if test $ac_delim_n = $ac_delim_num; then
     break
   elif $ac_last_try; then
-    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
@@ -10784,7 +10814,7 @@
 rm -f conf$$subs.sh
 
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
-cat >>"\$tmp/subs1.awk" <<\\_ACAWK &&
+cat >>"\$ac_tmp/subs1.awk" <<\\_ACAWK &&
 _ACEOF
 sed -n '
 h
@@ -10832,7 +10862,7 @@
 rm -f conf$$subs.awk
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 _ACAWK
-cat >>"\$tmp/subs1.awk" <<_ACAWK &&
+cat >>"\$ac_tmp/subs1.awk" <<_ACAWK &&
   for (key in S) S_is_set[key] = 1
   FS = ""
 
@@ -10864,21 +10894,29 @@
   sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
 else
   cat
-fi < "$tmp/subs1.awk" > "$tmp/subs.awk" \
-  || as_fn_error "could not setup config files machinery" "$LINENO" 5
+fi < "$ac_tmp/subs1.awk" > "$ac_tmp/subs.awk" \
+  || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
 _ACEOF
 
-# VPATH may cause trouble with some makes, so we remove $(srcdir),
-# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# VPATH may cause trouble with some makes, so we remove sole $(srcdir),
+# ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
 # trailing colons and then remove the whole line if VPATH becomes empty
 # (actually we leave an empty line to preserve line numbers).
 if test "x$srcdir" = x.; then
-  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
-s/:*\$(srcdir):*/:/
-s/:*\${srcdir}:*/:/
-s/:*@srcdir@:*/:/
-s/^\([^=]*=[	 ]*\):*/\1/
+  ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
+h
+s///
+s/^/:/
+s/[	 ]*$/:/
+s/:\$(srcdir):/:/g
+s/:\${srcdir}:/:/g
+s/:@srcdir@:/:/g
+s/^:*//
 s/:*$//
+x
+s/\(=[	 ]*\).*/\1/
+G
+s/\n//
 s/^[^=]*=[	 ]*$//
 }'
 fi
@@ -10890,7 +10928,7 @@
 # No need to generate them if there are no CONFIG_HEADERS.
 # This happens for instance with `./config.status Makefile'.
 if test -n "$CONFIG_HEADERS"; then
-cat >"$tmp/defines.awk" <<\_ACAWK ||
+cat >"$ac_tmp/defines.awk" <<\_ACAWK ||
 BEGIN {
 _ACEOF
 
@@ -10902,11 +10940,11 @@
 # handling of long lines.
 ac_delim='%!_!# '
 for ac_last_try in false false :; do
-  ac_t=`sed -n "/$ac_delim/p" confdefs.h`
-  if test -z "$ac_t"; then
+  ac_tt=`sed -n "/$ac_delim/p" confdefs.h`
+  if test -z "$ac_tt"; then
     break
   elif $ac_last_try; then
-    as_fn_error "could not make $CONFIG_HEADERS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
@@ -10991,7 +11029,7 @@
 _ACAWK
 _ACEOF
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
-  as_fn_error "could not setup config headers machinery" "$LINENO" 5
+  as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
 fi # test -n "$CONFIG_HEADERS"
 
 
@@ -11004,7 +11042,7 @@
   esac
   case $ac_mode$ac_tag in
   :[FHL]*:*);;
-  :L* | :C*:*) as_fn_error "invalid tag \`$ac_tag'" "$LINENO" 5;;
+  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
   :[FH]-) ac_tag=-:-;;
   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
   esac
@@ -11023,7 +11061,7 @@
     for ac_f
     do
       case $ac_f in
-      -) ac_f="$tmp/stdin";;
+      -) ac_f="$ac_tmp/stdin";;
       *) # Look for the file first in the build tree, then in the source tree
 	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
 	 # because $ac_f cannot contain `:'.
@@ -11032,7 +11070,7 @@
 	   [\\/$]*) false;;
 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
 	   esac ||
-	   as_fn_error "cannot find input file: \`$ac_f'" "$LINENO" 5;;
+	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
       esac
       case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
       as_fn_append ac_file_inputs " '$ac_f'"
@@ -11058,8 +11096,8 @@
     esac
 
     case $ac_tag in
-    *:-:* | *:-) cat >"$tmp/stdin" \
-      || as_fn_error "could not create $ac_file" "$LINENO" 5 ;;
+    *:-:* | *:-) cat >"$ac_tmp/stdin" \
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
     esac
     ;;
   esac
@@ -11189,23 +11227,24 @@
 s&@INSTALL@&$ac_INSTALL&;t t
 $ac_datarootdir_hack
 "
-eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$tmp/subs.awk" >$tmp/out \
-  || as_fn_error "could not create $ac_file" "$LINENO" 5
+eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$ac_tmp/subs.awk" \
+  >$ac_tmp/out || as_fn_error $? "could not create $ac_file" "$LINENO" 5
 
 test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
-  { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
-  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
+  { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
+  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
+      "$ac_tmp/out"`; test -z "$ac_out"; } &&
   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&5
+which seems to be undefined.  Please make sure it is defined" >&5
 $as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&2;}
+which seems to be undefined.  Please make sure it is defined" >&2;}
 
-  rm -f "$tmp/stdin"
+  rm -f "$ac_tmp/stdin"
   case $ac_file in
-  -) cat "$tmp/out" && rm -f "$tmp/out";;
-  *) rm -f "$ac_file" && mv "$tmp/out" "$ac_file";;
+  -) cat "$ac_tmp/out" && rm -f "$ac_tmp/out";;
+  *) rm -f "$ac_file" && mv "$ac_tmp/out" "$ac_file";;
   esac \
-  || as_fn_error "could not create $ac_file" "$LINENO" 5
+  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
  ;;
   :H)
   #
@@ -11214,21 +11253,21 @@
   if test x"$ac_file" != x-; then
     {
       $as_echo "/* $configure_input  */" \
-      && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs"
-    } >"$tmp/config.h" \
-      || as_fn_error "could not create $ac_file" "$LINENO" 5
-    if diff "$ac_file" "$tmp/config.h" >/dev/null 2>&1; then
+      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
+    } >"$ac_tmp/config.h" \
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+    if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
 $as_echo "$as_me: $ac_file is unchanged" >&6;}
     else
       rm -f "$ac_file"
-      mv "$tmp/config.h" "$ac_file" \
-	|| as_fn_error "could not create $ac_file" "$LINENO" 5
+      mv "$ac_tmp/config.h" "$ac_file" \
+	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
     fi
   else
     $as_echo "/* $configure_input  */" \
-      && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs" \
-      || as_fn_error "could not create -" "$LINENO" 5
+      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
+      || as_fn_error $? "could not create -" "$LINENO" 5
   fi
  ;;
 
@@ -11250,7 +11289,7 @@
 ac_clean_files=$ac_clean_files_save
 
 test $ac_write_fail = 0 ||
-  as_fn_error "write failure creating $CONFIG_STATUS" "$LINENO" 5
+  as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
 
 
 # configure is writing to config.log, and then calls config.status.
@@ -11271,7 +11310,7 @@
   exec 5>>config.log
   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
   # would make configure fail if this is the last instruction.
-  $ac_cs_success || as_fn_exit $?
+  $ac_cs_success || as_fn_exit 1
 fi
 if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
