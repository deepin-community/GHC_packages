Index: ghc6-6.12.1/rts/posix/OSThreads.c
===================================================================
--- ghc6-6.12.1.orig/rts/posix/OSThreads.c	2010-01-27 21:55:58.000000000 +0200
+++ ghc6-6.12.1/rts/posix/OSThreads.c	2010-01-27 21:56:53.000000000 +0200
@@ -7,10 +7,10 @@
  *
  * --------------------------------------------------------------------------*/

-#if defined(__linux__)
+#if defined(__linux__) || defined(__GLIBC__)
 /* We want GNU extensions in DEBUG mode for mutex error checking */
 /* We also want the affinity API, which requires _GNU_SOURCE */
-#define _GNU_SOURCE
+#define _GNU_SOURCE 1
 #endif

 #include "PosixSource.h"
