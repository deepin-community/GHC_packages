--- a/genvalidity.cabal
+++ b/genvalidity.cabal
@@ -59,12 +59,19 @@
       Paths_genvalidity
   default-language: Haskell2010
 
+flag smp
+  description:          build test with -N
+  default:              True
+
 test-suite genvalidity-test
   type: exitcode-stdio-1.0
   main-is: Spec.hs
   hs-source-dirs:
       test
-  ghc-options: -threaded -rtsopts -with-rtsopts=-N -Wall -fno-warn-name-shadowing
+  if flag(smp)
+    ghc-options: -threaded -rtsopts -with-rtsopts=-N -Wall -fno-warn-name-shadowing
+  else
+    ghc-options: -threaded -Wall -fno-warn-name-shadowing
   build-depends:
       QuickCheck
     , base
