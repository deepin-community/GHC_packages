--- a/aeson.cabal
+++ b/aeson.cabal
@@ -70,6 +70,10 @@
   default: False
   manual: False
 
+flag th
+  description: build TH bits
+  default: True
+
 library
   default-language: Haskell2010
 
@@ -79,12 +83,14 @@
     Data.Aeson.Parser
     Data.Aeson.Text
     Data.Aeson.Types
-    Data.Aeson.TH
 
     Data.Aeson.Encoding.Internal
     Data.Aeson.Internal
     Data.Aeson.Internal.Time
 
+  if flag(th)
+      exposed-modules: Data.Aeson.TH
+
   -- Deprecated modules
   exposed-modules:
     Data.Aeson.Encode
