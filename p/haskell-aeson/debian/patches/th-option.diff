--- a/aeson.cabal
+++ b/aeson.cabal
@@ -64,6 +64,10 @@ flag old-locale
                If true then depend on time < 1.5 together with old-locale.
   default: False
 
+flag th
+  description: build TH bits
+  default: True
+
 library
   default-language: Haskell2010
 
@@ -74,7 +78,8 @@ library
     Data.Aeson.Internal.Time
     Data.Aeson.Parser
     Data.Aeson.Types
-    Data.Aeson.TH
+  if flag(th)
+      exposed-modules: Data.Aeson.TH
 
   other-modules:
     Data.Aeson.Encode.Builder
