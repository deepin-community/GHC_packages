#!/usr/bin/make -f
include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/hlibrary.mk

DEB_SETUP_GHC_CONFIGURE_ARGS := --datasubdir=/usr/share/hoogle
HOOGLE_RESDIR := debian/hoogle/usr/share/hoogle/resources

build/hoogle:: build-ghc-stamp
binary-fixup/hoogle::
	sed -i -e "s/res\//\/hoogle\//g" $(HOOGLE_RESDIR)/template.html
	sed -i -e "s/action=\"\.\"/action=\"\.\/hoogle\"/g" $(HOOGLE_RESDIR)/template.html
	install debian/update-hoogle debian/hoogle/usr/sbin/
	install debian/haddock_collect.hs debian/hoogle/usr/share/hoogle/tool/
