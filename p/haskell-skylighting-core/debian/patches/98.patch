From 43797b47b93b3c0a64a2238439c83653e8cc7b9c Mon Sep 17 00:00:00 2001
From: William Grant <wgrant@ubuntu.com>
Date: Mon, 1 Jun 2020 12:04:40 +0200
Subject: [PATCH] Increase test timeout to avoid failures with qemu-emulated
 environments, such as qemu and riscv64 in Ubuntu builders

---
 skylighting-core/test/test-skylighting.hs | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/skylighting-core/test/test-skylighting.hs b/skylighting-core/test/test-skylighting.hs
index 682ae4d..f39ba65 100644
--- a/test/test-skylighting.hs
+++ b/test/test-skylighting.hs
@@ -193,7 +193,7 @@ p_no_drop cfg syntax t =
 
 noDropTest :: TokenizerConfig -> [Text] -> Syntax -> TestTree
 noDropTest cfg inps syntax =
-  localOption (mkTimeout 9000000)
+  localOption (mkTimeout 15000000)
   $ testCase (Text.unpack (sName syntax))
   $ mapM_ go inps
     where go inp =
@@ -210,7 +210,7 @@ noDropTest cfg inps syntax =
                 assertFailure (show e ++ "\ninput = " ++ show inp))
 
 tokenizerTest :: TokenizerConfig -> SyntaxMap -> Bool -> FilePath -> TestTree
-tokenizerTest cfg sMap regen inpFile = localOption (mkTimeout 9000000) $
+tokenizerTest cfg sMap regen inpFile = localOption (mkTimeout 15000000) $
   goldenTest testname getExpected getActual
       (compareValues referenceFile) updateGolden
   where testname = lang ++ " tokenizing of " ++ inpFile
