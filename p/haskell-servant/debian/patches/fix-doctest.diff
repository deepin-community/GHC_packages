--- a/test/Doctests.hs
+++ b/test/Doctests.hs
@@ -20,10 +20,10 @@
 
 getCabalMacrosFile :: IO FilePath
 getCabalMacrosFile = do
-  contents <- getDirectoryContents "dist"
+  contents <- getDirectoryContents "dist-ghc"
   let rest = "build" </> "autogen" </> "cabal_macros.h"
   return $ case filter ("dist-sandbox-" `isPrefixOf`) contents of
     [x] -> "dist" </> x </> rest
-    [] -> "dist" </> rest
+    [] -> "dist-ghc" </> rest
     xs -> error $ "ran doctests with multiple dist/dist-sandbox-xxxxx's: \n"
                 ++ show xs ++ "\nTry cabal clean"
