--- a/src/NotmuchCmd.hs
+++ b/src/NotmuchCmd.hs
@@ -54,6 +54,7 @@
 import Control.Exception (Exception, throw)
 import Control.Applicative
 import Control.Monad.IO.Class (MonadIO(..))
+import Control.Monad.Trans.Resource (MonadResource, runResourceT)
 import Data.Aeson
 import Data.Aeson.Types (Parser)
 import Data.ByteString (ByteString)
--- a/notmuch-web.cabal
+++ b/notmuch-web.cabal
@@ -134,6 +134,7 @@
                      , process-conduit               >= 0.5
                      , pwstore-fast
                      , random
+                     , resourcet
                      , tagsoup
                      , template-haskell
                      , text
@@ -181,6 +182,7 @@
                      , process-conduit               >= 0.5
                      , pwstore-fast
                      , random
+                     , resourcet
                      , tagsoup
                      , template-haskell
                      , text
--- a/src/Handler/Abook.hs
+++ b/src/Handler/Abook.hs
@@ -18,6 +18,7 @@

 import Import
 import Control.Exception.Lifted (try)
+import Control.Monad.Trans.Resource (runResourceT)
 import Data.Conduit.Process
 import System.Exit (ExitCode(..))
 import qualified Data.Text as T
--- a/src/Handler/View.hs
+++ b/src/Handler/View.hs
@@ -28,6 +28,7 @@
 import Handler.Tags

 import Blaze.ByteString.Builder (fromByteString)
+import Control.Monad.Trans.Resource (ResourceT)
 import Text.Blaze.Html.Renderer.Text (renderHtml)
 import Text.Markdown
 import qualified Data.ByteString as B
