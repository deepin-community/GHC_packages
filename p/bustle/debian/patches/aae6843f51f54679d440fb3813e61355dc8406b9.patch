From aae6843f51f54679d440fb3813e61355dc8406b9 Mon Sep 17 00:00:00 2001
From: Jan Tojnar <jtojnar@gmail.com>
Date: Fri, 18 Oct 2019 01:33:19 +0200
Subject: [PATCH] =?UTF-8?q?Setup.hs:=20Don=E2=80=99t=20import=20Gettext.hs?=
 =?UTF-8?q?=20without=20hgettext?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Gettext.hs is broken with Cabal â‰¥ 2.4 so until we fix it, I made importing it
conditional on the value of `hgettext` flag, so that the builds still work.
---
 Setup.hs | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/Setup.hs b/Setup.hs
index dd86bba..50e7b54 100644
--- a/Setup.hs
+++ b/Setup.hs
@@ -1,4 +1,8 @@
+{-# LANGUAGE CPP #-}
 {-# OPTIONS_GHC -Wall #-}
+
+#if defined(VERSION_hgettext)
+
 import System.FilePath ( (</>), (<.>) )
 
 import Distribution.PackageDescription
@@ -92,3 +96,12 @@ generateModule pkg lbi =
     tar = GetText.targetDataDir lbi
 
 -- Cargo-culted from hgettext
+
+#else
+
+import Distribution.Simple
+
+main :: IO ()
+main = defaultMain
+
+#endif
-- 
2.26.2

